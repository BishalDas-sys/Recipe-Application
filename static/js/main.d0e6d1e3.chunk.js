(this["webpackJsonpuser-auth-react-redux"]=this["webpackJsonpuser-auth-react-redux"]||[]).push([[0],{199:function(e,t,a){"use strict";a.r(t);var c=a(1),r=a(25),s=a.n(r),n=a(15),o=a(5),l=a(28),i=a(63),j=a(2),d={isLoading:!1,data:{},errors:{}},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return Object(j.a)(Object(j.a)({},e),{},{data:Object(j.a)({},t.payload)});case"REGISTER_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{register:t.payload})});case"LOGIN_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{login:t.payload})});case"ACCOUNT_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{account:t.payload})});default:return Object(j.a)({},e)}},u=a(21),m={isLoading:!1,data:[],errors:{}},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"NOTES_LOADING":return Object(j.a)(Object(j.a)({},e),{},{isLoading:!0});case"SET_NOTES":return Object(j.a)(Object(j.a)({},e),{},{data:Object(u.a)(t.payload).reverse(),isLoading:!1});case"ADD_NOTE":return Object(j.a)(Object(j.a)({},e),{},{data:[Object(j.a)({},t.payload)].concat(Object(u.a)(e.data))});case"REMOVE_NOTE":var a=e.data.filter((function(e){return e._id!==t.payload}));return Object(j.a)(Object(j.a)({},e),{},{data:Object(u.a)(a)});case"EDIT_NOTE":var c=e.data.map((function(e){return e._id===t.payload._id?Object(j.a)(Object(j.a)({},e),t.payload):Object(j.a)({},e)}));return Object(j.a)(Object(j.a)({},e),{},{data:Object(u.a)(c)});case"ALL_NOTES_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{allNotes:t.payload})});case"ADD_NOTE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{addNote:t.payload})});case"REMOVE_NOTE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{removeNote:t.payload})});case"EDIT_NOTE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{editNote:t.payload})});case"SINGLE_NOTE_ERROR":return Object(j.a)(Object(j.a)({},e),{},{errors:Object(j.a)(Object(j.a)({},e.errors),{},{singleNote:t.payload})});default:return Object(j.a)({},e)}},h=function(){return Object(l.c)(Object(l.b)({user:b,notes:O}),Object(l.a)(i.a))},p=(a(72),a(73),a(6)),f=a(14),x=a.n(f),v=a(0),g=function(e){var t,a=e.title,c=e.type,r=e.handleDisplay,s=e.className;return"h1"===c?t=Object(v.jsx)("h1",{className:s,children:a}):"h2"===c?t=Object(v.jsx)("h2",{className:s,children:a}):"h3"===c?t=Object(v.jsx)("h3",{className:s,children:a}):"h4"===c&&(t=Object(v.jsx)("h4",{onClick:r,className:s,children:a})),t},N=function(e){var t=e.src,a=e.alt,c=e.className;return Object(v.jsx)("img",{className:c,src:t,alt:a})},y=a.p+"static/media/notes.f77cc135.svg",E=function(e){return Object(v.jsx)("div",{className:"container",children:Object(v.jsx)("div",{className:"text-center",children:Object(v.jsx)(N,{className:"img-fluid",src:y,alt:"notes2"})})})},R=a(16),w=a(27),k=a.n(w),_=function(e){var t=e.value,a=e.handleChange,c=e.name,r=e.placeholder,s=e.type,n=e.className;return Object(v.jsx)("input",{type:s,value:t,onChange:a,name:c,placeholder:r,className:n})},S=function(e){var t=e.value,a=e.handleClick,c=e.className;return Object(v.jsx)("button",{className:c,onClick:a,children:t})},T=a(13),C=a.n(T),I=function(e){return function(t){t(L()),C.a.get("http://dct-user-auth.herokuapp.com/api/notes",{headers:{"x-auth":e}}).then((function(e){var a=e.data;t(D(a))})).catch((function(e){t(A(e.message))}))}},D=function(e){return{type:"SET_NOTES",payload:e}},L=function(){return{type:"NOTES_LOADING"}},A=function(e){return{type:"ALL_NOTES_ERROR",payload:e}},G=function(e){return{type:"ADD_NOTE",payload:e}},M=function(e){return{type:"ADD_NOTE_ERROR",payload:e}},U=function(e){return{type:"REMOVE_NOTE",payload:e}},F=function(e){return{type:"REMOVE_NOTE_ERROR",payload:e}},V=function(e){return{type:"EDIT_NOTE",payload:e}},J=function(e){return{type:"EDIT_NOTE_ERROR",payload:e}},P=function(e){return{type:"SINGLE_NOTE_ERROR",payload:e}},B=function(e){return{type:"REGISTER_ERROR",payload:e}},H=function(e){return{type:"LOGIN_ERROR",payload:e}},Y=function(e){return function(t){C.a.get("http://dct-user-auth.herokuapp.com/users/account",{headers:{"x-auth":e}}).then((function(e){var a=e.data;t(q(a))})).catch((function(e){console.log(e.message),t(z(e.message))}))}},q=function(e){return{type:"SET_USER",payload:e}},z=function(e){return{type:"ACCOUNT_ERROR",payload:e}},K=function(e){var t=Object(c.useState)({username:"",email:"",password:"",formErrors:{}}),a=Object(R.a)(t,2),r=a[0],s=a[1],n={},l=Object(o.b)(),i=Object(o.c)((function(e){return e.user.errors})),d=function(e){"username"===e.target.name?s(Object(j.a)(Object(j.a)({},r),{},{username:e.target.value})):"email"===e.target.name?s(Object(j.a)(Object(j.a)({},r),{},{email:e.target.value})):"password"===e.target.name&&s(Object(j.a)(Object(j.a)({},r),{},{password:e.target.value}))};return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(g,{className:"my-4",type:"h2",title:"Register with us "}),Object(v.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),0===r.username.trim().length&&(n.username="username can't be blank"),0===r.email.trim().length?n.email="email can't be blank":k.a.isEmail(r.email)||(n.email="invalid email format"),0===r.password.length?n.password="password can't be blank":(r.password.length<6||r.password.length>128)&&(n.password="password characters should be greater than 6 & less than 128"),0===Object.keys(n).length){s(Object(j.a)(Object(j.a)({},r),{},{formErrors:{}}));var a=r.username,c=r.email,o=r.password;l(function(e,t,a){return function(c){C.a.post("http://dct-user-auth.herokuapp.com/users/register",e).then((function(e){var c=e.data;c.hasOwnProperty("errors")?x()({title:c.message,button:"Cancel"}):(x()({title:"Your account has been successfully created",button:"Cancel"}),a(),t())})).catch((function(e){c(B(e.message))}))}}({username:a,email:c,password:o},(function(){e.history.push("/login")}),(function(){s({username:"",email:"",password:"",formErrors:{}})})))}else s(Object(j.a)(Object(j.a)({},r),{},{formErrors:Object(j.a)({},n)}))},children:[Object(v.jsx)("div",{className:"mb-3 row",children:Object(v.jsxs)("div",{className:"col-sm-4",children:[Object(v.jsx)(_,{type:"text",className:"form-control",value:r.username,handleChange:d,name:"username",placeholder:"Enter username"}),r.formErrors.username&&Object(v.jsxs)("div",{className:"form-text",children:[" ",r.formErrors.username," "]})]})}),Object(v.jsx)("div",{className:"mb-3 row",children:Object(v.jsxs)("div",{className:"col-sm-4",children:[Object(v.jsx)(_,{type:"text",className:"form-control",value:r.email,handleChange:d,name:"email",placeholder:"Enter email"}),r.formErrors.email&&Object(v.jsxs)("div",{className:"form-text",children:[" ",r.formErrors.email," "]})]})}),Object(v.jsx)("div",{className:"mb-3 row",children:Object(v.jsxs)("div",{className:"col-sm-4",children:[Object(v.jsx)(_,{type:"text",className:"form-control",value:r.password,handleChange:d,name:"password",placeholder:"Enter password"}),r.formErrors.password&&Object(v.jsxs)("div",{className:"form-text",children:[" ",r.formErrors.password," "]})]})}),Object(v.jsx)(_,{type:"submit",className:"btn btn-primary my-3",value:"Register"}),Object(v.jsx)(S,{value:"Cancel",className:"btn btn-secondary ms-4",handleClick:function(){e.history.push("/")}})]}),i.register&&Object(v.jsx)("div",{className:"text-danger",children:i.register})]})},Q=function(e){var t=Object(c.useState)({email:"",password:"",formErrors:{}}),a=Object(R.a)(t,2),r=a[0],s=a[1],n={},l=Object(o.b)(),i=Object(o.c)((function(e){return e.user.errors})),d=function(e){"email"===e.target.name?s(Object(j.a)(Object(j.a)({},r),{},{email:e.target.value})):"password"===e.target.name&&s(Object(j.a)(Object(j.a)({},r),{},{password:e.target.value}))};return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(g,{className:"my-4",type:"h2",title:"Login to your account"}),Object(v.jsxs)("form",{onSubmit:function(t){if(t.preventDefault(),0===r.email.trim().length?n.email="email can't be blank":k.a.isEmail(r.email)||(n.email="invalid email format"),0===r.password.length?n.password="password can't be blank":(r.password.length<6||r.password.length>128)&&(n.password="password characters should be greater than 6 and less than 128"),0===Object.keys(n).length){s(Object(j.a)(Object(j.a)({},r),{},{formErrors:{}}));var a=r.email,c=r.password;l(function(e,t,a){return function(c){C.a.post("http://dct-user-auth.herokuapp.com/users/login",e).then((function(e){var r=e.data;r.hasOwnProperty("errors")?x()({title:r.errors,button:"Cancel"}):(x()({title:"Successfully logged in",button:"Cancel"}),localStorage.setItem("token",r.token),c(Y(r.token)),c(I(r.token)),a(),t())})).catch((function(e){c(H(e.message))}))}}({email:a,password:c},(function(){e.history.push("/")}),(function(){s({email:"",password:"",formErrors:{}})})))}else s(Object(j.a)(Object(j.a)({},r),{},{formErrors:n}))},children:[Object(v.jsx)("div",{className:"mb-3 row",children:Object(v.jsxs)("div",{className:"col-sm-4",children:[Object(v.jsx)(_,{type:"text",className:"form-control",value:r.email,handleChange:d,name:"email",placeholder:"email"}),r.formErrors.email&&Object(v.jsx)("div",{className:"form-text",children:r.formErrors.email})]})}),Object(v.jsx)("div",{className:"mb-3 row",children:Object(v.jsxs)("div",{className:"col-sm-4",children:[Object(v.jsx)(_,{type:"text",className:"form-control",value:r.password,handleChange:d,name:"password",placeholder:"password"}),r.formErrors.password&&Object(v.jsx)("div",{className:"form-text",children:r.formErrors.password})]})}),Object(v.jsx)(_,{type:"submit",className:"btn btn-primary my-3",value:"Login"}),Object(v.jsx)(S,{value:"Cancel",className:"btn btn-secondary ms-4",handleClick:function(){e.history.push("/")}})]}),i.login&&Object(v.jsx)("div",{className:"text-danger",children:i.login})]})},W=function(e){var t=e.text,a=e.className;return Object(v.jsx)("p",{className:a,children:t})},X=a.p+"static/media/spinner.265e52bf.gif",Z=function(e){return Object(v.jsx)("img",{src:X,alt:"spinner"})},$=function(e){var t=Object(o.c)((function(e){return e.user}));return Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(g,{className:"my-4",type:"h2",title:"User Account"}),Object.keys(t.data).length>0?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(W,{className:"lead",text:"Name - ".concat(t.data.username)}),Object(v.jsx)(W,{className:"lead",text:"Email - ".concat(t.data.email)})]}):Object(v.jsx)(Z,{}),t.errors.account&&Object(v.jsx)("div",{className:"text-danger",children:t.errors.account})]})},ee=function(e){var t=e.value,a=e.handleChange,c=e.name,r=e.placeholder,s=e.className;return Object(v.jsx)("textarea",{className:s,value:t,onChange:a,name:c,placeholder:r})},te=function(e){var t=e.formSubmit,a=e.title,r=e.body,s=Object(c.useState)({title:a||"",body:r||"",formErrors:{}}),n=Object(R.a)(s,2),o=n[0],l=n[1],i={},d=function(e){"title"===e.target.name?l(Object(j.a)(Object(j.a)({},o),{},{title:e.target.value})):"body"===e.target.name&&l(Object(j.a)(Object(j.a)({},o),{},{body:e.target.value}))};return Object(v.jsx)("div",{children:Object(v.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),0===o.title.trim().length&&(i.title="Recipe Name can't be blank"),0===Object.keys(i).length){l(Object(j.a)(Object(j.a)({},o),{},{formErrors:{}}));var a=o.title,c=o.body;t({title:a,body:c},(function(){l({title:"",body:"",formErrors:{}})}))}else l(Object(j.a)(Object(j.a)({},o),{},{formErrors:Object(j.a)({},i)}))},children:[Object(v.jsx)("div",{className:"row mb-3",children:Object(v.jsxs)("div",{className:"col-sm-6",children:[Object(v.jsx)(_,{type:"text",className:"form-control",value:o.title,handleChange:d,name:"title",placeholder:"Recipe Name"}),o.formErrors.title&&Object(v.jsx)("div",{className:"form-text",children:o.formErrors.title})]})}),Object(v.jsx)("div",{className:"row mb-3",children:Object(v.jsx)("div",{className:"col-sm-6",children:Object(v.jsx)(ee,{className:"form-control",value:o.body,handleChange:d,name:"body",placeholder:"Add Ingredients"})})}),Object(v.jsx)(_,{type:"submit",className:"btn btn-success my-3",value:"Save Recipe"})]})})},ae=function(e){var t=e._id,a=e.title,c=e.body,r=(e.handleToggle,Object(o.b)());return Object(v.jsxs)("div",{children:[Object(v.jsx)(g,{type:"h2",title:"Edit Recipe"}),Object(v.jsx)(te,{_id:t,title:a,body:c,formSubmit:function(t,a){r(function(e,t,a){return function(c){C.a.put("http://dct-user-auth.herokuapp.com/api/notes/".concat(t._id),e,{headers:{"x-auth":localStorage.getItem("token")}}).then((function(e){var r=e.data;c(V(r)),a(),t.handleToggle()})).catch((function(e){c(J(e.message))}))}}(t,e,a))}})]})},ce=function(e){var t=e._id,a=e.title,r=e.body,s=e.date,n=void 0===s?(new Date).toLocaleString():s,l=Object(c.useState)(!1),i=Object(R.a)(l,2),j=i[0],d=i[1],b=Object(o.b)(),u=function(){d(!j)};return Object(v.jsx)("div",{children:j?Object(v.jsxs)("div",{children:[Object(v.jsx)(ae,{_id:t,title:a,body:r,handleToggle:u}),Object(v.jsx)(S,{className:"btn btn-secondary",value:"Cancel",handleClick:u})]}):Object(v.jsxs)("div",{children:[Object(v.jsx)(g,{className:"mb-3",type:"h4",title:a,currdate:n,handleDisplay:function(){b(function(e){return function(t){C.a.get("http://dct-user-auth.herokuapp.com/api/notes/".concat(e),{headers:{"x-auth":localStorage.getItem("token")}}).then((function(e){var t=e.data;x()({title:t.title,text:t.body,button:"Cancel"})})).catch((function(e){t(P(e.message))}))}}(t))}}),Object(v.jsx)(S,{className:"btn btn-warning me-4 mb-4",value:"Edit",handleClick:u}),Object(v.jsx)(S,{className:"btn btn-danger me-4 mb-4",value:"Remove Recipe",handleClick:function(){b(function(e){return function(t){window.confirm("Are you sure")&&C.a.delete("http://dct-user-auth.herokuapp.com/api/notes/".concat(e),{headers:{"x-auth":localStorage.getItem("token")}}).then((function(e){var a=e.data;t(U(a._id))})).catch((function(e){t(F(e.message))}))}}(t))}})]})})},re=function(e){var t=Object(o.c)((function(e){return e.notes}));return Object(v.jsxs)("div",{children:[t.isLoading?Object(v.jsx)(Z,{}):Object(v.jsx)(v.Fragment,{children:0===t.data.length?Object(v.jsx)(W,{text:"No Recipe found, add your first Recipe"}):Object(v.jsx)("div",{children:t.data.map((function(e){return Object(v.jsx)(ce,Object(j.a)({},e),e._id)}))})}),t.errors.removeNote&&Object(v.jsx)("div",{className:"text-danger",children:t.errors.removeNote}),t.errors.editNote&&Object(v.jsx)("div",{className:"text-danger",children:t.errors.editNote}),t.errors.singleNote&&Object(v.jsx)("div",{className:"text-danger",children:t.errors.singleNote})]})},se=function(e){var t=Object(o.b)(),a=Object(o.c)((function(e){return e.notes.errors}));return Object(v.jsxs)("div",{children:[Object(v.jsx)(g,{type:"h2",title:"Add Recipe"}),Object(v.jsx)(te,{formSubmit:function(e,a){t(function(e,t){return function(a){window.confirm("Are you sure")&&C.a.post("http://dct-user-auth.herokuapp.com/api/notes",e,{headers:{"x-auth":localStorage.getItem("token")}}).then((function(e){var c=e.data;a(G(c)),t()})).catch((function(e){a(M(e.message))}))}}(e,a))}}),a.addNote&&Object(v.jsx)("div",{className:"text-danger",children:a.addNote})]})},ne=function(e){var t=Object(o.b)();Object(c.useEffect)((function(){var e=localStorage.getItem("token");t(I(e))}),[]);var a=Object(o.c)((function(e){return e.notes}));return Object(v.jsxs)("div",{className:"container justify-content-center align-items-center",children:[Object(v.jsx)(g,{className:"my-5",type:"h3",title:"Recipe - ".concat(a.data.length)}),Object(v.jsxs)("div",{className:"row",children:[Object(v.jsx)("div",{className:"col-sm-6",children:Object(v.jsx)(re,{})}),Object(v.jsx)("div",{className:"col-sm-6",children:Object(v.jsx)(se,{})})]}),a.errors.allNotes&&Object(v.jsx)("div",{className:"text-danger",children:a.errors.allNotes})]})},oe=Object(p.e)((function(e){var t=Object(o.b)();Object(c.useEffect)((function(){var e=localStorage.getItem("token");e&&t(Y(e))}),[]);var a=Object(o.c)((function(e){return e.user.data}));return Object(v.jsxs)("div",{children:[Object(v.jsx)("nav",{className:"navbar navbar-expand-sm navbar-dark bg-dark",children:Object(v.jsxs)("div",{className:"container",children:[Object(v.jsx)(g,{className:"navbar-brand",type:"h2",title:"My Recipe"}),Object(v.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarMenu",children:Object(v.jsx)("span",{className:"navbar-toggler-icon"})}),Object(v.jsx)("div",{className:"collapse navbar-collapse",id:"navbarMenu",children:Object(v.jsxs)("ul",{className:"navbar-nav ms-auto",children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(n.b,{className:"nav-link",to:"/",children:" Home "})}),Object.keys(a).length>0?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(n.b,{className:"nav-link",to:"/account",children:" Account "})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(n.b,{className:"nav-link",to:"/notes",children:" Recipes "})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(n.b,{className:"nav-link",to:"#",onClick:function(){localStorage.removeItem("token"),x()({title:"Successfully logged out",button:"Cancel"}),t(q({})),e.history.push("/")},children:" Logout "})})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(n.b,{className:"nav-link",to:"/register",children:" Register "})}),Object(v.jsx)("li",{className:"nav-item",children:Object(v.jsx)(n.b,{className:"nav-link",to:"/login",children:" Login "})})]})]})})]})}),Object(v.jsx)(p.a,{path:"/",component:E,exact:!0}),Object(v.jsx)(p.a,{path:"/register",component:K}),Object(v.jsx)(p.a,{path:"/login",component:Q}),Object(v.jsx)(p.a,{path:"/account",component:$}),Object(v.jsx)(p.a,{path:"/notes",component:ne})]})})),le=function(e){return Object(v.jsx)("div",{children:Object(v.jsx)(oe,{})})},ie=h();s.a.render(Object(v.jsx)(o.a,{store:ie,children:Object(v.jsx)(n.a,{children:Object(v.jsx)(le,{})})}),document.getElementById("root"))}},[[199,1,2]]]);
//# sourceMappingURL=main.d0e6d1e3.chunk.js.map